# OpenWrt for Amlogic TV Boxes / æ™¶æ™¨ OpenWrt

æŸ¥çœ‹è‹±æ–‡è¯´æ˜ | [View English description](README.md)

[OpenWrt](https://openwrt.org/) é¡¹ç›®æ˜¯ä¸€ä¸ªé’ˆå¯¹åµŒå…¥å¼è®¾å¤‡çš„ Linux è·¯ç”±å™¨æ“ä½œç³»ç»Ÿã€‚OpenWrt ä¸æ˜¯ä¸€ä¸ªå•ä¸€ä¸”ä¸å¯æ›´æ”¹çš„å›ºä»¶ï¼Œè€Œæ˜¯æä¾›äº†å…·æœ‰è½¯ä»¶åŒ…ç®¡ç†åŠŸèƒ½çš„å®Œå…¨å¯å†™çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè®©æ‚¨å¯ä»¥è‡ªç”±é€‰æ‹©éœ€è¦çš„è½¯ä»¶åŒ…æ¥å®šåˆ¶è·¯ç”±å™¨ç³»ç»Ÿã€‚å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼ŒOpenWrt æ˜¯ä¸€ä¸ªæ— éœ€å›´ç»•å®ƒæ„å»ºå®Œæ•´å›ºä»¶å°±èƒ½å¼€å‘åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼›å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œè¿™æ„å‘³ç€æ‹¥æœ‰äº†å®Œå…¨å®šåˆ¶çš„èƒ½åŠ›ï¼Œèƒ½ä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼ä½¿ç”¨è¯¥è®¾å¤‡ã€‚å®ƒæ‹¥æœ‰è¶…è¿‡ 3000+ ä¸ªæ ‡å‡†åŒ–åº”ç”¨è½¯ä»¶åŒ…å’Œéå¸¸ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹æ’ä»¶æ”¯æŒï¼Œè®©æ‚¨å¯ä»¥è½»æ¾åœ°å°†ä»–ä»¬åº”ç”¨äºå„ç§æ”¯æŒçš„è®¾å¤‡ã€‚

ç°åœ¨ä½ å¯ä»¥å°†ä½¿ç”¨ Amlogic èŠ¯ç‰‡çš„ç”µè§†ç›’å­çš„å®‰å“ TV ç³»ç»Ÿæ›´æ¢ä¸º OpenWrt ç³»ç»Ÿï¼Œè®©ä»–æˆä¸ºä¸€å°åŠŸèƒ½å¼ºå¤§çš„è·¯ç”±å™¨ã€‚æœ¬é¡¹ç›®æ”¯æŒ github.com ä¸€ç«™å¼å®Œæ•´ç¼–è¯‘ï¼ˆä»è‡ªå®šä¹‰è½¯ä»¶åŒ…è¿›è¡Œç¼–è¯‘ï¼Œåˆ°æ‰“åŒ…å›ºä»¶ï¼Œå®Œå…¨åœ¨ github.com ä¸€ç«™å¼å®Œæˆï¼‰ï¼›æ”¯æŒæœ¬åœ°åŒ–æ‰“åŒ…ï¼ˆåœ¨æœ¬åœ°Ubuntuç­‰ç¯å¢ƒä¸­è¿›è¡Œå›ºä»¶æ‰“åŒ…ï¼‰ã€‚æ”¯æŒçš„Amlogic S9xxxç³»åˆ—å‹å·æœ‰ ***`a311d, s922x, s905x3, s905x2, s905l3a, s912, s905d, s905x, s905w, s905`*** ç­‰ï¼Œä¾‹å¦‚ ***`Belink GT-King, Belink GT-King Pro, UGOOS AM6 Plus, X96-Max+, HK1-Box, H96-Max-X3, Phicomm-N1, Octopus-Planet, Fiberhome HG680P, ZTE B860H`*** ç­‰ç”µè§†ç›’å­ã€‚

æœ€æ–°çš„å›ºä»¶å¯ä»¥åœ¨ [Releases](https://github.com/ophub/amlogic-s9xxx-openwrt/releases) ä¸­ä¸‹è½½ã€‚æ¬¢è¿ä½  `Fork` å¹¶è¿›è¡Œ [ä¸ªæ€§åŒ–è½¯ä»¶åŒ…å®šåˆ¶](https://github.com/ophub/amlogic-s9xxx-openwrt/blob/main/router-config/README.cn.md) ã€‚å¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œå¯ä»¥ç‚¹ä»“åº“å³ä¸Šè§’çš„ `Star` è¡¨ç¤ºæ”¯æŒã€‚

## OpenWrt å›ºä»¶è¯´æ˜

| èŠ¯ç‰‡  | è®¾å¤‡ | [å¯é€‰å†…æ ¸](https://github.com/ophub/kernel/tree/main/pub/stable) | OpenWrt å›ºä»¶ |
| ---- | ---- | ---- | ---- |
| a311d | [Khadas-VIM3](https://www.gearbest.com/boards---shields/pp_3008145189226460.html) | å…¨éƒ¨ | openwrt_a311d_k*.img |
| s922x | [Beelink-GT-King](https://tokopedia.link/RAgZmOM41db), [Beelink-GT-King-Pro](https://www.gearbest.com/tv-box/pp_3008857542462482.html), [Ugoos-AM6-Plus](https://www.gearbest.com/tv-box/pp_3002820788090799.html), [ODROID-N2](https://www.hardkernel.com/shop/odroid-n2-with-4gbyte-ram-2/) | å…¨éƒ¨ | openwrt_s922x_k*.img |
| s905x3 | [X96-Max+](https://www.gearbest.com/tv-box/pp_3001768790621051.html), [HK1-Box](https://tokopedia.link/xhWeQgTuwfb), [H96-Max-X3](https://tokopedia.link/KuWvwoYuwfb), [Ugoos-X3](https://tokopedia.link/duoIXZpdGgb), [TX3](https://www.aliexpress.com/item/1005003772717802.html), [X96-Air](https://www.gearbest.com/tv-box/pp_3002885621272175.html), [A95XF3-Air](https://tokopedia.link/ByBL45jdGgb), [Tencent-Aurora-3Pro(s905x3-b)](https://item.jd.com/100009131339.html) | å…¨éƒ¨ | openwrt_s905x3_k*.img |
| s905x2 | [X96Max-4G](https://www.ebay.com/itm/164895650425), [X96Max-2G](https://www.alibaba.com/product-detail/Amlogic-S905X2-Android-TV-Box-X96_62210191636.html), [MECOOL-KM3-4G](https://www.gearbest.com/tv-box/pp_3008133484979616.html) | å…¨éƒ¨ | openwrt_s905x2_k*.img |
| s912 | [Tanix-TX8-Max](https://www.tanix-box.com/project-view/tanix-tx8-max-android-tv-box/), [Tanix-TX9-Pro](https://www.gearbest.com/tv-box/pp_759339.html), [Tanix-TX92](http://www.tanix-box.com/project-view/tanix-tx92-android-tv-box-powered-amlogic-s912/), [Nexbox-A1](https://www.gearbest.com/tv-box-mini-pc/pp_424843.html), [Nexbox-A95X-A2](https://www.cafago.com/en/p-v2979eu-2g.html),  [A95X](https://tokopedia.link/zQVlmUfgqqb), [H96-Pro-Plus](https://www.gearbest.com/tv-box-mini-pc/pp_503486.html), [VORKE-Z6-Plus](http://www.vorke.com/project/vorke-z6-2/), [Mecool-M8S-PRO-L](https://www.gearbest.com/tv-box/pp_3005746210753315.html), [Vontar-X92](https://nl.aliexpress.com/i/32734559342.html), [T95Z-Plus](https://www.ebay.com/itm/253466003975), [Octopus-Planet](https://post.smzdm.com/p/a07oer59/) | å…¨éƒ¨ | openwrt_s912_k*.img |
| s905d | [MECOOL-KI-Pro](https://www.gearbest.com/tv-box-mini-pc/pp_629409.html), [Phicomm-N1](https://www.cnx-software.com/2019/03/11/phicomm-n1-tv-box-linux-distributions/) | å…¨éƒ¨ | openwrt_s905d_k*.img |
| s905x | [HG680P](https://tokopedia.link/HbrIbqQcGgb), [B860H](https://www.zte.com.cn/global/products/cocloud/201707261551/IP-STB/ZXV10-B860H), [TBee-Box](https://www.tbee.com/product/tbee-box/) | å…¨éƒ¨ | openwrt_s905x_k*.img |
| s905w | [X96-Mini](https://www.gearbest.com/tv-box/pp_3008306149708795.html), [TX3-Mini](https://www.gearbest.com/tv-box/pp_009748238474.html), [W95](https://www.gearbest.com/tv-box/pp_736121.html) | 5.4.y/5.15.y | openwrt_s905w_k*.img |
| s905 | [Beelink-Mini-MX-2G](https://www.gearbest.com/tv-box-mini-pc/pp_321409.html), [MXQ-PRO+4K](https://www.gearbest.com/tv-box-mini-pc/pp_354313.html) | å…¨éƒ¨ | openwrt_s905_k*.img |
| s905l3a | [E900V22C/D](https://github.com/Calmact/e900v22c), [CM311-1a-YST](https://www.znds.com/tv-1216697-1-1.html), [M401A](https://blog.csdn.net/fatiaozhang9527/article/details/124157038), [M411A](https://blog.csdn.net/fatiaozhang9527/article/details/126388479), [UNT403A](https://blog.csdn.net/wjf149575296/article/details/123947681), [UNT413A](https://blog.csdn.net/fatiaozhang9527/article/details/122232733) | å…¨éƒ¨ | openwrt_s905l3a_k*.img |

ğŸ’¡æç¤ºï¼šå½“å‰ ***`s905w`*** ç³»åˆ—çš„ç›’å­åªæ”¯æŒä½¿ç”¨ `5.4.y/5.15.y` å†…æ ¸ï¼Œå…¶ä»–å‹å·çš„ç›’å­å¯ä»»é€‰å†…æ ¸ç‰ˆæœ¬ä½¿ç”¨ã€‚å½“å‰ ***`s905`*** çš„ç›’å­åªèƒ½åœ¨ `TF/SD/USB` ä¸­ä½¿ç”¨ï¼Œå…¶ä»–å‹å·çš„ç›’å­åŒæ—¶æ”¯æŒå†™å…¥ `EMMC` ä¸­ä½¿ç”¨ã€‚æ¯ä¸ªç›’å­çš„ dtb å’Œ u-boot è¯·æŸ¥é˜…[è¯´æ˜](https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/armbian-docs/amlogic_model_database.md)ã€‚

## å®‰è£…åŠå‡çº§ OpenWrt çš„ç›¸å…³è¯´æ˜

é€‰æ‹©å’Œä½ çš„ç”µè§†ç›’å­å‹å·å¯¹åº”çš„ OpenWrt å›ºä»¶ï¼Œä½¿ç”¨ [Rufus](https://rufus.ie/) æˆ–è€… [balenaEtcher](https://www.balena.io/etcher/) ç­‰å·¥å…·å°†å›ºä»¶å†™å…¥USBé‡Œï¼Œç„¶åæŠŠå†™å¥½å›ºä»¶çš„USBæ’å…¥ç”µè§†ç›’å­ã€‚

- ### å®‰è£… OpenWrt

ä»æµè§ˆå™¨è®¿é—® OpenWrt çš„é»˜è®¤ IP: 192.168.1.1 â†’ `ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `æ™¶æ™¨å®ç›’` â†’ `å®‰è£… OpenWrt` ï¼Œåœ¨æ”¯æŒçš„è®¾å¤‡ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©ä½ çš„ç›’å­ï¼Œç‚¹å‡» `å®‰è£… OpenWrt` æŒ‰é’®è¿›è¡Œå®‰è£…ã€‚

- ### å‡çº§ OpenWrt

ä»æµè§ˆå™¨è®¿é—® OpenWrt çš„ IP å¦‚: 192.168.1.1 â†’  `ä½¿ç”¨è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `æ™¶æ™¨å®ç›’` â†’ `æ‰‹åŠ¨ä¸Šä¼ æ›´æ–° / åœ¨çº¿ä¸‹è½½æ›´æ–°`

å¦‚æœé€‰æ‹© `æ‰‹åŠ¨ä¸Šä¼ æ›´æ–°` [OpenWrt å›ºä»¶](https://github.com/ophub/amlogic-s9xxx-openwrt/releases)ï¼Œå¯ä»¥å°†ç¼–è¯‘å¥½ OpenWrt å›ºä»¶å‹ç¼©åŒ…ï¼Œå¦‚ openwrt_s9xxx_k5.15.50_xxx.img.gz è¿›è¡Œä¸Šä¼ ï¼ˆæ¨èä¸Šä¼ å‹ç¼©åŒ…ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£å‹ã€‚å¦‚æœä¸Šä¼ è§£å‹ç¼©åçš„ xxx.img æ ¼å¼çš„æ–‡ä»¶ï¼Œå¯èƒ½ä¼šå› ä¸ºæ–‡ä»¶å¤ªå¤§è€Œä¸Šä¼ å¤±è´¥ï¼‰ï¼Œä¸Šä¼ å®Œæˆåç•Œé¢å°†æ˜¾ç¤º `æ›´æ–°å›ºä»¶` çš„æ“ä½œæŒ‰é’®ï¼Œç‚¹å‡»å³å¯æ›´æ–°ã€‚

å¦‚æœé€‰æ‹© `æ‰‹åŠ¨ä¸Šä¼ æ›´æ–°` [OpenWrt å†…æ ¸](https://github.com/ophub/kernel/tree/main/pub/stable)ï¼Œå¯ä»¥å°† `boot-xxx.tar.gz`, `dtb-amlogic-xxx.tar.gz`, `modules-xxx.tar.gz` è¿™ 3 ä¸ªå†…æ ¸æ–‡ä»¶ä¸Šä¼ ï¼ˆå…¶ä»–å†…æ ¸æ–‡ä»¶ä¸éœ€è¦ï¼Œå¦‚æœåŒæ—¶ä¸Šä¼ ä¹Ÿä¸å½±å“æ›´æ–°ï¼Œç³»ç»Ÿå¯ä»¥å‡†ç¡®è¯†åˆ«éœ€è¦çš„å†…æ ¸æ–‡ä»¶ï¼‰ï¼Œä¸Šä¼ å®Œæˆåç•Œé¢å°†æ˜¾ç¤º `æ›´æ–°å†…æ ¸` çš„æ“ä½œæŒ‰é’®ï¼Œç‚¹å‡»å³å¯æ›´æ–°ã€‚

å¦‚æœé€‰æ‹© `åœ¨çº¿ä¸‹è½½æ›´æ–°` OpenWrt å›ºä»¶æˆ–å†…æ ¸ï¼Œå°†æ ¹æ®`æ’ä»¶è®¾ç½®`ä¸­çš„`å›ºä»¶ä¸‹è½½åœ°å€`å’Œ`å†…æ ¸ä¸‹è½½åœ°å€`è¿›è¡Œä¸‹è½½ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ä¸‹è½½æ¥æºï¼Œå…·ä½“æ“ä½œæ–¹æ³•è¯¦è§ [luci-app-amlogic](https://github.com/ophub/luci-app-amlogic) çš„ç¼–è¯‘ä¸ä½¿ç”¨è¯´æ˜ã€‚

æç¤ºï¼šå®‰è£…/å‡çº§ç­‰åŠŸèƒ½ç”± [luci-app-amlogic](https://github.com/ophub/luci-app-amlogic) æä¾›å¯è§†åŒ–æ“ä½œæ”¯æŒã€‚ä¹Ÿæ”¯æŒ[å‘½ä»¤æ“ä½œ](https://github.com/ophub/amlogic-s9xxx-openwrt/blob/main/router-config/README.cn.md#8-å®‰è£…å›ºä»¶)ã€‚

- ### åœ¨ TF/SD/USB ä¸­ä½¿ç”¨ OpenWrt

ä»æµè§ˆå™¨è®¿é—® OpenWrt çš„é»˜è®¤ IP: 192.168.1.1 â†’ `ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `TTYD ç»ˆç«¯` â†’ è¾“å…¥å‘½ä»¤

```yaml
openwrt-tf
```

æ¿€æ´»å‰©ä½™ç©ºé—´åï¼Œæ”¯æŒåœ¨ TF/SD/USB ä¸­å‡çº§å†…æ ¸å’Œ OpenWrt ç³»ç»Ÿã€‚

- ### ä¸º OpenWrt åˆ›å»º swap

å¦‚æœä½ åœ¨ä½¿ç”¨ `docker` ç­‰å†…å­˜å ç”¨è¾ƒå¤§çš„åº”ç”¨æ—¶ï¼Œè§‰å¾—å½“å‰ç›’å­çš„å†…å­˜ä¸å¤Ÿä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»º `swap` è™šæ‹Ÿå†…å­˜åˆ†åŒºï¼Œå°† `/mnt/*4` ç£ç›˜ç©ºé—´çš„ä¸€å®šå®¹é‡è™šæ‹Ÿæˆå†…å­˜æ¥ä½¿ç”¨ã€‚ä¸‹é¢å‘½ä»¤è¾“å…¥å‚æ•°çš„å•ä½æ˜¯ `GB`ï¼Œé»˜è®¤ä¸º `1`ã€‚

ä»æµè§ˆå™¨è®¿é—® OpenWrt çš„é»˜è®¤ IP: 192.168.1.1 â†’ `ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `TTYD ç»ˆç«¯` â†’ è¾“å…¥å‘½ä»¤

```yaml
openwrt-swap 1
```

- ### å¤‡ä»½/è¿˜åŸ EMMC åŸç³»ç»Ÿ

æ”¯æŒåœ¨ `TF/SD/USB` ä¸­å¯¹ç›’å­çš„ `EMMC` åˆ†åŒºè¿›è¡Œå¤‡ä»½/æ¢å¤ã€‚å»ºè®®æ‚¨åœ¨å…¨æ–°çš„ç›’å­é‡Œå®‰è£… OpenWrt ç³»ç»Ÿå‰ï¼Œå…ˆå¯¹å½“å‰ç›’å­è‡ªå¸¦çš„å®‰å“ TV ç³»ç»Ÿè¿›è¡Œå¤‡ä»½ï¼Œä»¥ä¾¿æ—¥ååœ¨æ¢å¤ç”µè§†ç³»ç»Ÿç­‰æƒ…å†µä¸‹ä½¿ç”¨ã€‚

è¯·ä» `TF/SD/USB` å¯åŠ¨ OpenWrt ç³»ç»Ÿï¼Œæµè§ˆå™¨è®¿é—® OpenWrt çš„é»˜è®¤ IP: 192.168.1.1 â†’ `ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `TTYD ç»ˆç«¯` â†’ è¾“å…¥å‘½ä»¤

```yaml
openwrt-ddbr
```

æ ¹æ®æç¤ºè¾“å…¥ `b` è¿›è¡Œç³»ç»Ÿå¤‡ä»½ï¼Œè¾“å…¥ `r` è¿›è¡Œç³»ç»Ÿæ¢å¤ã€‚

ğŸ’¡æç¤ºï¼šé¡»ä½¿ç”¨ `/mnt/*4/` ç©ºé—´è¿›è¡Œå­˜æ”¾ `BACKUP-arm-64-emmc.img.gz` å¤‡ä»½æ–‡ä»¶ï¼Œæœªåˆ›å»º `TF/SD/USB` æ‰©å±•åˆ†åŒºçš„ç”¨æˆ·ï¼Œé¡»å…ˆä½¿ç”¨ `openwrt-tf` å‘½ä»¤åˆ›å»ºæ‰©å±•åˆ†åŒºã€‚

- ### æ§åˆ¶ LED æ˜¾ç¤º

ä»æµè§ˆå™¨è®¿é—® OpenWrt çš„é»˜è®¤ IP: 192.168.1.1 â†’ `ä½¿ç”¨é»˜è®¤è´¦æˆ·ç™»å½•è¿›å…¥ OpenWrt` â†’ `ç³»ç»Ÿèœå•` â†’ `TTYD ç»ˆç«¯` â†’ è¾“å…¥å‘½ä»¤

```yaml
openwrt-led
```

æ ¹æ® [LED å±æ˜¾ç¤ºæ§åˆ¶è¯´æ˜](https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/armbian-docs/led_screen_display_control.md) è¿›è¡Œè°ƒè¯•ã€‚

- ### æ›´å¤šä½¿ç”¨è¯´æ˜

ä½¿ç”¨ `firstboot` å‘½ä»¤å¯ä»¥æ¢å¤ç³»ç»Ÿè‡³åˆå§‹åŒ–çŠ¶æ€ã€‚åœ¨ OpenWrt çš„ä½¿ç”¨ä¸­ï¼Œä¸€äº›å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜è¯¦è§ [router-config](router-config/README.cn.md)

## æœ¬åœ°åŒ–æ‰“åŒ…

1. å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼ˆå¦‚ Ubuntu 22.04 LTS ç”¨æˆ·ï¼‰
```yaml
sudo apt-get update -y
sudo apt-get full-upgrade -y
# For Ubuntu-22.04
sudo apt-get install -y $(curl -fsSL https://is.gd/depend_ubuntu2204_openwrt)
```
2. Clone ä»“åº“åˆ°æœ¬åœ° `git clone --depth 1 https://github.com/ophub/amlogic-s9xxx-openwrt.git`
3. åœ¨ `~/amlogic-s9xxx-openwrt` æ ¹ç›®å½•ä¸‹åˆ›å»º `openwrt-armvirt` æ–‡ä»¶å¤¹, å¹¶å°† `openwrt-armvirt-64-default-rootfs.tar.gz` æ–‡ä»¶ä¸Šä¼ è‡³æ­¤ç›®å½•ã€‚
4. åœ¨ `~/amlogic-s9xxx-openwrt` æ ¹ç›®å½•ä¸­è¾“å…¥æ‰“åŒ…å‘½ä»¤ï¼Œå¦‚ `sudo ./make -d -b s905x3 -k 5.10.125`ã€‚æ‰“åŒ…å®Œæˆçš„ OpenWrt å›ºä»¶æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„ `out` æ–‡ä»¶å¤¹é‡Œã€‚

- ### æœ¬åœ°åŒ–æ‰“åŒ…å‚æ•°è¯´æ˜

| å‚æ•° | å«ä¹‰ | è¯´æ˜ |
| ---- | ---- | ---- |
| -d | Defaults | ä½¿ç”¨é»˜è®¤é…ç½® |
| -b | BuildSoC | æŒ‡å®šç”µè§†ç›’å­å‹å·ï¼Œå¦‚ `-b s905x3` . å¤šä¸ªå‹å·ä½¿ç”¨ `_` è¿›è¡Œè¿æ¥ï¼Œå¦‚ `-b s905x3_s905d` ã€‚ä½¿ç”¨ `all` è¡¨ç¤ºå…¨éƒ¨å‹å·ã€‚å¯ä»¥æŒ‡å®šçš„å‹å·æœ‰: `a311d`, `s905x3`, `s905x3-b`, `s905x2`, `s905l3a`, `s905x`, `s905w`, `s905d`, `s905d-ki`, `s905`, `s922x`, `s922x-n2`, `s912`, `s912-m8s` ã€‚è¯´æ˜ï¼š`s922x-reva` æ˜¯ `s922x-gtking-pro-rev_a`ï¼Œ`s922x-n2` æ˜¯ `s922x-odroid-n2` ï¼Œ`s912-m8s` æ˜¯ `s912-mecool-m8s-pro-l` ï¼Œ`s905d-ki` æ˜¯ `s905d-mecool-ki-pro`ï¼Œ`s905x2-km3` æ˜¯ `s905x2-mecool-km3` |
| -k | Kernel | æŒ‡å®š [kernel](https://github.com/ophub/kernel/tree/main/pub/stable) åç§°ï¼Œå¦‚ `-k 5.10.125` . å¤šä¸ªå†…æ ¸ä½¿ç”¨ `_` è¿›è¡Œè¿æ¥ï¼Œå¦‚ `-k 5.10.125_5.15.50` |
| -a | AutoKernel | è®¾ç½®æ˜¯å¦è‡ªåŠ¨é‡‡ç”¨åŒç³»åˆ—æœ€æ–°ç‰ˆæœ¬å†…æ ¸ã€‚å½“ä¸º `true` æ—¶ï¼Œå°†è‡ªåŠ¨åœ¨å†…æ ¸åº“ä¸­æŸ¥æ‰¾åœ¨ `-k` ä¸­æŒ‡å®šçš„å†…æ ¸å¦‚ 5.10.125 çš„åŒç³»åˆ—æ˜¯å¦æœ‰æ›´æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœ‰ 5.10.125 ä¹‹åçš„æœ€æ–°ç‰ˆæœ¬æ—¶ï¼Œå°†è‡ªåŠ¨æ›´æ¢ä¸ºæœ€æ–°ç‰ˆã€‚è®¾ç½®ä¸º `false` æ—¶å°†ç¼–è¯‘æŒ‡å®šç‰ˆæœ¬å†…æ ¸ã€‚é»˜è®¤å€¼ï¼š`true` |
| -v | VersionBranch | æŒ‡å®šå†…æ ¸ [ç‰ˆæœ¬åˆ†æ”¯](https://github.com/ophub/kernel/tree/main/pub) åç§°ï¼Œå¦‚ `-v stable` ã€‚æŒ‡å®šçš„åç§°é¡»ä¸åˆ†æ”¯ç›®å½•åç§°ç›¸åŒã€‚é»˜è®¤ä½¿ç”¨ `stable` åˆ†æ”¯ç‰ˆæœ¬ã€‚ |
| -s | Size | å¯¹å›ºä»¶çš„ ROOTFS åˆ†åŒºå¤§å°è¿›è¡Œè®¾ç½®ï¼ˆMiBï¼‰ï¼Œé»˜è®¤å¤§å°ä¸º 960 MiB, å›ºä»¶å¤§å°å¿…é¡»å¤§äº 512 MiB. ä¾‹å¦‚ï¼š `-s 960` |

- `sudo ./make -d` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä½¿ç”¨å†…æ ¸åº“ä¸­çš„æœ€æ–°å†…æ ¸åŒ…ï¼Œå¯¹å…¨éƒ¨å‹å·çš„ç”µè§†ç›’å­è¿›è¡Œæ‰“åŒ…ã€‚
- `sudo ./make -d -b s905x3 -k 5.10.125` : æ¨èä½¿ç”¨. ä½¿ç”¨é»˜è®¤é…ç½®è¿›è¡Œç›¸å…³å†…æ ¸æ‰“åŒ…ã€‚
- `sudo ./make -d -b s905x3_s905d -k 5.10.125_5.15.50` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè¿›è¡Œå¤šä¸ªå†…æ ¸åŒæ—¶æ‰“åŒ…ã€‚ä½¿ç”¨ `_` è¿›è¡Œå¤šå†…æ ¸å‚æ•°è¿æ¥ã€‚
- `sudo ./make -d -b s905x3 -k 5.10.125 -s 960` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼ŒæŒ‡å®šä¸€ä¸ªå†…æ ¸ï¼Œä¸€ä¸ªå‹å·è¿›è¡Œæ‰“åŒ…ï¼Œå›ºä»¶å¤§å°è®¾å®šä¸º 960 MiBã€‚
- `sudo ./make -d -b s905x3 -v dev -k 5.10.125` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼ŒæŒ‡å®šå‹å·ï¼Œ[æŒ‡å®šç‰ˆæœ¬åˆ†æ”¯](https://github.com/ophub/kernel/tree/main/pub) å’Œå†…æ ¸è¿›è¡Œæ‰“åŒ…ã€‚
- `sudo ./make -d -b s905x3_s905d`  ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œå¯¹å¤šä¸ªå‹å·çš„ç”µè§†ç›’å­è¿›è¡Œå…¨éƒ¨å†…æ ¸æ‰“åŒ…, ä½¿ç”¨ `_` è¿›è¡Œå¤šå‹å·è¿æ¥ã€‚
- `sudo ./make -d -k 5.10.125_5.15.50` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼ŒæŒ‡å®šå¤šä¸ªå†…æ ¸ï¼Œè¿›è¡Œå…¨éƒ¨å‹å·ç”µè§†ç›’å­è¿›è¡Œæ‰“åŒ…, å†…æ ¸åŒ…ä½¿ç”¨ `_` è¿›è¡Œè¿æ¥ã€‚
- `sudo ./make -d -k 5.10.125_5.15.50 -a true` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼ŒæŒ‡å®šå¤šä¸ªå†…æ ¸ï¼Œè¿›è¡Œå…¨éƒ¨å‹å·ç”µè§†ç›’å­è¿›è¡Œæ‰“åŒ…, å†…æ ¸åŒ…ä½¿ç”¨ `_` è¿›è¡Œè¿æ¥ã€‚è‡ªåŠ¨å‡çº§åˆ°åŒç³»åˆ—æœ€æ–°å†…æ ¸ã€‚
- `sudo ./make -d -s 960 -k 5.10.125` : ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè®¾ç½®å›ºä»¶å¤§å°ä¸º 960 MiB, å¹¶æŒ‡å®šå†…æ ¸ä¸º 5.10.125 ï¼Œå¯¹å…¨éƒ¨å‹å·ç”µè§†ç›’å­è¿›è¡Œæ‰“åŒ…ã€‚

## ä½¿ç”¨ GitHub Actions è¿›è¡Œç¼–è¯‘

ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ `router-config` ç›®å½•çš„ç›¸å…³ä¸ªæ€§åŒ–å›ºä»¶é…ç½®æ–‡ä»¶ï¼Œä»¥åŠ `.yml` æ–‡ä»¶, è‡ªå®šä¹‰å’Œç¼–è¯‘é€‚åˆä½ çš„ OpenWrt å›ºä»¶,  å›ºä»¶å¯ä»¥ä¸Šä¼ è‡³ github.com çš„ `Actions` å’Œ `Releases` ç­‰å¤„.

1. ä½ å¯ä»¥åœ¨ [router-config](https://github.com/ophub/amlogic-s9xxx-openwrt/tree/main/router-config/README.cn.md) ä¸­æŸ¥çœ‹ä¸ªæ€§åŒ–å›ºä»¶é…ç½®è¯´æ˜ã€‚ç¼–è¯‘æµç¨‹æ§åˆ¶æ–‡ä»¶æ˜¯ [.yml](https://github.com/ophub/amlogic-s9xxx-openwrt/blob/main/.github/workflows/build-openwrt-with-lede.yml)
2. å…¨æ–°ç¼–è¯‘ï¼šåœ¨ github.com çš„ [Action](https://github.com/ophub/amlogic-s9xxx-openwrt/actions) é€‰æ‹© ***`Build OpenWrt`*** . ç‚¹å‡» ***`Run workflow`*** æŒ‰é’®è¿›è¡Œå›ºä»¶ä¸€ç«™å¼ç¼–è¯‘å’Œæ‰“åŒ…ã€‚
3. å†æ¬¡ç¼–è¯‘ï¼šå¦‚æœ [Releases](https://github.com/ophub/amlogic-s9xxx-openwrt/releases) ä¸­æœ‰å·²ç»ç¼–è¯‘å¥½çš„ `openwrt-armvirt-64-default-rootfs.tar.gz` æ–‡ä»¶ï¼Œä½ åªæ˜¯æƒ³å†æ¬¡åˆ¶ä½œå…¶ä»–ä¸åŒ soc çš„ç›’å­ï¼Œå¯ä»¥è·³è¿‡ OpenWrt æºæ–‡ä»¶çš„ç¼–è¯‘ï¼Œç›´æ¥è¿›è¡ŒäºŒæ¬¡åˆ¶ä½œã€‚åœ¨ [Actions](https://github.com/ophub/amlogic-s9xxx-openwrt/actions) é¡µé¢ä¸­é€‰æ‹©  ***`Use Releases file to Packaging`*** ï¼Œç‚¹å‡» ***`Run workflow`*** æŒ‰é’®å³å¯äºŒæ¬¡ç¼–è¯‘ã€‚
4. æ›´å¤šæ”¯æŒï¼šç¼–è¯‘å¥½çš„ `openwrt-armvirt-64-default-rootfs.tar.gz` æ–‡ä»¶æ˜¯åˆ¶ä½œå„ç§ä¸åŒ SoC å›ºä»¶çš„é€šç”¨æ–‡ä»¶ï¼Œä¹Ÿé€‚ç”¨äºä½¿ç”¨ [unifreq](https://github.com/unifreq/openwrt_packit) çš„æ‰“åŒ…è„šæœ¬åˆ¶ä½œ OpenWrt å›ºä»¶ã€‚ä»–ä½œä¸ºåœ¨ç›’å­é‡Œä½¿ç”¨ OpenWrt å’Œ Armbian ç³»ç»Ÿçš„å¼€åˆ›è€…ï¼Œå¯¹æ›´å¤šçš„è®¾å¤‡è¿›è¡Œäº†æ”¯æŒï¼Œå¦‚åœ¨ [Armbian](https://github.com/ophub/amlogic-s9xxx-armbian) ç³»ç»Ÿä¸­é€šè¿‡ `KVM` è™šæ‹Ÿæœºä½¿ç”¨çš„ OpenWrtï¼ˆ[qemu ç‰ˆ](https://github.com/unifreq/openwrt_packit/blob/master/files/qemu-aarch64/qemu-aarch64-readme.md)ï¼‰ã€Allwinner (`å¾®åŠ äº‘`)ã€Rockchip (`è´å£³äº‘`ã€`æˆ‘å®¶äº‘`)ï¼Œä»¥åŠ Amlogic ç³»åˆ—ç­‰ã€‚æ‰“åŒ…æ–¹æ³•è¯¦è§ä»–çš„ä»“åº“è¯´æ˜ï¼Œåœ¨ Actions ä¸­é€šè¿‡ [packaging-openwrt-for-qemu-etc.yml](.github/workflows/packaging-openwrt-for-qemu-etc.yml) å¯ä»¥è°ƒç”¨ä»–çš„æ‰“åŒ…è„šæœ¬åˆ¶ä½œæ›´å¤šå›ºä»¶ã€‚

```yaml
- name: Package Armvirt as OpenWrt
  uses: ophub/amlogic-s9xxx-openwrt@main
  with:
    openwrt_path: openwrt/bin/targets/*/*/*rootfs.tar.gz
    openwrt_soc: s905x3_s905x2_s905x_s905w_s905d_s922x_s912
    openwrt_kernel: 5.10.125_5.15.50
```
- ### GitHub Actions è¾“å…¥å‚æ•°è¯´æ˜

ç›¸å…³å‚æ•°ä¸`æœ¬åœ°æ‰“åŒ…å‘½ä»¤`ç›¸å¯¹åº”ï¼Œè¯·å‚è€ƒä¸Šé¢çš„è¯´æ˜ã€‚

| å‚æ•°              | é»˜è®¤å€¼             | è¯´æ˜                                        |
|-------------------|-------------------|-------------------------------------------|
| openwrt_path      | no                | è®¾ç½® `openwrt-armvirt-64-default-rootfs.tar.gz` çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¦‚ `openwrt/bin/targets/*/*/*rootfs.tar.gz` æˆ–ç½‘ç»œæ–‡ä»¶ä¸‹è½½åœ°å€å¦‚ `https://github.com/*/releases/*/*rootfs.tar.gz` |
| openwrt_soc       | s905d_s905x3      | è®¾ç½®æ‰“åŒ…ç›’å­çš„ `SOC` ï¼ŒåŠŸèƒ½å‚è€ƒ `-b` |
| openwrt_kernel    | 5.10.125_5.15.50   | è®¾ç½®å†…æ ¸ç‰ˆæœ¬ï¼ŒåŠŸèƒ½å‚è€ƒ `-k` |
| auto_kernel       | true              | è®¾ç½®æ˜¯å¦è‡ªåŠ¨é‡‡ç”¨åŒç³»åˆ—æœ€æ–°ç‰ˆæœ¬å†…æ ¸ã€‚åŠŸèƒ½å‚è€ƒ `-a` |
| version_branch    | stable            | æŒ‡å®šå†…æ ¸ [ç‰ˆæœ¬åˆ†æ”¯](https://github.com/ophub/kernel/tree/main/pub) åç§°ï¼ŒåŠŸèƒ½å‚è€ƒ `-v` |
| openwrt_size      | 960               | è®¾ç½®å›ºä»¶ ROOTFS åˆ†åŒºçš„å¤§å°ï¼ŒåŠŸèƒ½å‚è€ƒ `-s`      |

- ### GitHub Actions è¾“å‡ºå˜é‡è¯´æ˜

ä¸Šä¼ åˆ° `Releases` éœ€è¦ç»™ä»“åº“æ·»åŠ  `GITHUB_TOKEN` å’Œ `GH_TOKEN` å¹¶è®¾ç½® `Workflow è¯»å†™æƒé™`ï¼Œè¯¦è§[ä½¿ç”¨è¯´æ˜](router-config/README.cn.md#2-è®¾ç½®éšç§å˜é‡-github_token)ã€‚

| å‚æ•°                                      | é»˜è®¤å€¼              | è¯´æ˜                     |
|------------------------------------------|--------------------|--------------------------|
| ${{ env.PACKAGED_OUTPUTPATH }}           | out                | æ‰“åŒ…åçš„å›ºä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„  |
| ${{ env.PACKAGED_OUTPUTDATE }}           | 04.13.1058         | æ‰“åŒ…æ—¥æœŸï¼ˆæœˆ.æ—¥.æ—¶åˆ†ï¼‰      |
| ${{ env.PACKAGED_STATUS }}               | success / failure  | æ‰“åŒ…çŠ¶æ€ã€‚æˆåŠŸ / å¤±è´¥       |

## openwrt-*-rootfs.tar.gz ç”¨äºæ‰“åŒ…çš„æ–‡ä»¶ç¼–è¯‘é€‰é¡¹

| Option | Value |
| ---- | ---- |
| Target System | QEMU ARM Virtual Machine |
| Subtarget | QEMU ARMv8 Virtual Machine(cortex-a53) |
| Target Profile | Default |
| Target Images | tar.gz |

æ›´å¤šä¿¡æ¯è¯·æŸ¥é˜… [router-config](https://github.com/ophub/amlogic-s9xxx-openwrt/tree/main/router-config/README.cn.md)

## OpenWrt å›ºä»¶é»˜è®¤ä¿¡æ¯

| åç§° | å€¼ |
| ---- | ---- |
| é»˜è®¤ IP | 192.168.1.1 |
| é»˜è®¤è´¦å· | root |
| é»˜è®¤å¯†ç  | password |
| é»˜è®¤ WIFI åç§° | OpenWrt |
| é»˜è®¤ WIFI å¯†ç  | none |

## ç¼–è¯‘å†…æ ¸

å†…æ ¸çš„ç¼–è¯‘æ–¹æ³•è¯¦è§ [compile-kernel](https://github.com/ophub/amlogic-s9xxx-armbian/tree/main/compile-kernel)

```yaml
- name: Compile the kernel for Amlogic s9xxx
  uses: ophub/amlogic-s9xxx-armbian@main
  with:
    build_target: kernel
    kernel_version: 5.10.125_5.15.50
    kernel_auto: true
    kernel_sign: -ophub
```

## èµ„æºè¯´æ˜

åˆ¶ä½œ OpenWrt ç³»ç»Ÿæ—¶ï¼Œæ‰€ä½¿ç”¨çš„ [kernel](https://github.com/ophub/kernel) å’Œ [u-boot](https://github.com/ophub/amlogic-s9xxx-armbian/tree/main/build-armbian/amlogic-u-boot) ç­‰æ–‡ä»¶ï¼Œä¸åˆ¶ä½œ [Armbian](https://github.com/ophub/amlogic-s9xxx-armbian) ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ç›¸åŒçš„æ–‡ä»¶ã€‚ä¸ºäº†ä¸é‡å¤ç»´æŠ¤ï¼Œç›¸å…³å†…å®¹å½’ç±»æ”¾åœ¨äº†å¯¹åº”çš„èµ„æºä»“åº“ï¼Œåœ¨ä½¿ç”¨æ—¶å°†è‡ªåŠ¨ä»ç›¸å…³ä»“åº“è¿›è¡Œä¸‹è½½ã€‚

æœ¬ç³»ç»Ÿæ‰€ä½¿ç”¨çš„ `kernel` / `u-boot` ç­‰èµ„æºä¸»è¦ä» [unifreq/openwrt_packit](https://github.com/unifreq/openwrt_packit) çš„é¡¹ç›®ä¸­å¤åˆ¶è€Œæ¥ï¼Œéƒ¨åˆ†æ–‡ä»¶ç”±ç”¨æˆ·åœ¨ [amlogic-s9xxx-openwrt](https://github.com/ophub/amlogic-s9xxx-openwrt) / [amlogic-s9xxx-armbian](https://github.com/ophub/amlogic-s9xxx-armbian) / [luci-app-amlogic](https://github.com/ophub/luci-app-amlogic) / [kernel](https://github.com/ophub/kernel) ç­‰é¡¹ç›®çš„ [Pull](https://github.com/ophub/amlogic-s9xxx-openwrt/pulls) å’Œ [Issues](https://github.com/ophub/amlogic-s9xxx-openwrt/issues) ä¸­æä¾›åˆ†äº«ã€‚`unifreq` ä¸ºæˆ‘ä»¬å¼€å¯äº†åœ¨ç”µè§†ç›’å­ä¸­ä½¿ç”¨ OpenWrt çš„å¤§é—¨ï¼Œæ·±å—å…¶å½±å“ï¼Œæˆ‘çš„å›ºä»¶åœ¨åˆ¶ä½œå’Œä½¿ç”¨ä¸­ç»§æ‰¿äº†ä»–ä¸€è´¯çš„æ ‡å‡†ã€‚ä¸ºæ„Ÿè°¢è¿™äº›å¼€æ‹“è€…å’Œåˆ†äº«è€…ï¼Œæˆ‘ç»Ÿä¸€åœ¨ [CONTRIBUTORS.md](https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/CONTRIBUTORS.md) ä¸­è¿›è¡Œäº†è®°å½•ã€‚å†æ¬¡æ„Ÿè°¢å¤§å®¶ä¸ºç›’å­èµ‹äºˆäº†æ–°çš„ç”Ÿå‘½å’Œæ„ä¹‰ã€‚

## é“¾æ¥

- [OpenWrt](https://github.com/openwrt/openwrt)
- [coolsnowwolf/lede](https://github.com/coolsnowwolf/lede)
- [unifreq/openwrt_packit](https://github.com/unifreq/openwrt_packit)

## License

The amlogic-s9xxx-openwrt Â© OPHUB is licensed under [GPL-2.0](https://github.com/ophub/amlogic-s9xxx-openwrt/blob/main/LICENSE)
